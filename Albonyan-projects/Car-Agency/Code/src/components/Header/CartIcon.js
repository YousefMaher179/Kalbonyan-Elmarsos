import React, { useEffect, useState } from "react";
import classes from "./CartIcon.module.css";
import { useShoppingCart } from "../../Store/cart-context";

const CartIcon = (props) => {
  const [scrolled, setScrolled] = useState(false);
  const handleScroll = () => {
    const offset = window.scrollY;
    if (offset > 200) {
      setScrolled(true);
    } else {
      setScrolled(false);
    }
  };

  useEffect(() => {
    window.addEventListener("scroll", handleScroll);
  }, []);

  const { cartAmount } = useShoppingCart();
  return (
    <div
      className={scrolled ? classes["cart-icon2"] : classes["cart-icon"]}
      onClick={props.onShow}
    >
      <svg
        // width="51"
        // height="44"
        viewBox="0 0 51 44"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M0.845334 8.58042C0.145683 8.75817 -0.209815 9.54859 0.130555 10.1726C0.247794 10.3882 0.376379 10.5092 0.614638 10.6378C0.765914 10.721 0.796169 10.721 2.56988 10.7323L4.37384 10.7437L4.50999 11.1294C4.58185 11.3412 4.87305 12.1619 5.15291 12.9523C5.43277 13.7427 5.89417 15.0437 6.17781 15.8454C6.46145 16.6472 6.84342 17.725 7.02874 18.247C7.21405 18.7651 7.6414 19.9677 7.97421 20.9132C8.3108 21.8587 8.72681 23.0348 8.90077 23.5227C9.07474 24.0106 9.36595 24.8275 9.5437 25.338C9.72523 25.8486 10.058 26.7903 10.2887 27.437C10.5156 28.0799 10.8901 29.1388 11.1207 29.7893L11.5368 30.9655L11.3817 31.3777C11.2985 31.6008 11.0527 32.2664 10.8371 32.8489C10.3908 34.0439 10.3492 34.2028 10.3492 34.6944C10.3492 35.1256 10.4324 35.4697 10.6253 35.8706C11.0262 36.6988 11.9906 37.3266 12.8566 37.3266C12.9587 37.3266 13.042 37.3342 13.042 37.3455C13.042 37.3569 12.9852 37.4817 12.9134 37.6216C12.4406 38.5671 12.3272 39.5958 12.5881 40.5904C13.1025 42.5532 15.0199 43.892 17.0167 43.684C18.4917 43.5289 19.7132 42.678 20.3637 41.3543C20.931 40.1933 20.931 38.8545 20.3637 37.6973C20.2729 37.5157 20.2086 37.3569 20.22 37.3455C20.2502 37.3153 28.6082 37.3228 28.6347 37.3531C28.6498 37.3644 28.6347 37.4174 28.6007 37.4666C28.4797 37.6556 28.2754 38.1889 28.1847 38.5557C27.9502 39.5239 28.0599 40.4883 28.5099 41.3922C29.3987 43.1848 31.4636 44.0962 33.381 43.5441C35.3022 42.9919 36.588 41.0972 36.3838 39.1306C36.3271 38.5898 36.2288 38.2343 35.9981 37.754C35.8997 37.5422 35.8241 37.3607 35.8392 37.3493C35.8506 37.338 36.7544 37.3266 37.8474 37.3266C39.0954 37.3266 39.8896 37.3115 39.9766 37.2888C40.0523 37.2661 40.1998 37.1829 40.3056 37.0997C40.8502 36.6686 40.8465 35.8101 40.2943 35.3941C40.196 35.3184 40.0485 35.2352 39.9691 35.2125C39.8632 35.1823 36.2931 35.1709 26.4261 35.1709C17.4138 35.1709 12.9777 35.1596 12.8831 35.1331C12.7243 35.0877 12.5692 34.9213 12.5314 34.7625C12.5087 34.6604 12.7243 34.0402 13.3974 32.24L13.4996 31.9752L14.7741 31.8126C15.4737 31.7256 17.9282 31.4155 20.2276 31.1281C26.8913 30.2847 31.8418 29.6645 33.6155 29.4414C34.5193 29.3241 35.3967 29.1993 35.5631 29.1539C36.2363 28.98 36.9322 28.564 37.4503 28.0194C37.9609 27.4823 38.2975 26.8659 38.4676 26.1587L38.5508 25.8107V19.3248V12.8388L38.4676 12.6838C38.3391 12.4455 38.218 12.3169 37.9949 12.1959L37.7945 12.0825L22.474 12.0711L7.15354 12.0635L7.11572 11.9387C7.03252 11.6891 6.19294 9.32924 6.14377 9.20822C6.06435 9.0229 5.82987 8.78086 5.61431 8.6674L5.42143 8.56529L3.19011 8.55773C1.96478 8.55395 0.909626 8.56529 0.845334 8.58042ZM36.3763 19.8807C36.3763 24.4606 36.3649 25.5422 36.3233 25.6973C36.1607 26.3062 35.669 26.8243 35.0715 27.0172C34.9694 27.0512 33.1881 27.2895 31.1194 27.5504C29.0507 27.8076 25.7983 28.216 23.896 28.4581C17.1718 29.3052 13.5071 29.7628 13.4731 29.7628C13.4315 29.7628 13.439 29.7855 12.0208 25.7729C11.8393 25.251 11.4536 24.1732 11.1699 23.3714C10.6594 21.9305 10.2055 20.656 9.36216 18.2659C9.12012 17.5889 8.84783 16.8136 8.7495 16.5451C8.65117 16.2728 8.50746 15.8644 8.42804 15.6374C8.34862 15.4067 8.20869 15.0059 8.11414 14.7374L7.94017 14.2571H22.1563H36.3763V19.8807ZM17.1075 37.6103C17.8034 37.7918 18.3782 38.378 18.5446 39.0701C18.8056 40.1895 18.0681 41.2938 16.9335 41.4867C15.6477 41.7023 14.4526 40.5261 14.6644 39.2554C14.8573 38.0792 15.9843 37.3191 17.1075 37.6103ZM32.7229 37.614C33.2184 37.7426 33.7025 38.1095 33.9483 38.5406C34.092 38.794 34.2206 39.2667 34.2206 39.5353C34.2168 40.2689 33.7403 41.0102 33.0709 41.3165C32.4998 41.5813 31.9287 41.5775 31.3652 41.2976C30.7072 40.9762 30.3063 40.3748 30.2609 39.6525C30.2231 39.0776 30.4198 38.5633 30.8358 38.1435C31.3312 37.6405 32.046 37.4401 32.7229 37.614Z"
          fill="white"
        />
        <path
          d="M13.4465 17.4112C13.3293 17.4377 13.1591 17.5095 13.0683 17.57C12.8792 17.7024 12.6826 17.9823 12.6221 18.2016C12.5275 18.5571 12.6864 19.0563 12.9738 19.3021C13.2877 19.5744 12.3951 19.5518 23.3626 19.5518H33.2561L33.449 19.461C33.899 19.253 34.1562 18.7651 34.0654 18.2924C33.9709 17.7894 33.6494 17.4793 33.1313 17.3961C32.7796 17.3356 13.7188 17.3545 13.4465 17.4112Z"
          fill="white"
        />
        <path
          d="M16.2192 23.4736C15.9885 23.5568 15.6822 23.8669 15.6027 24.1051C15.5233 24.3396 15.5195 24.6308 15.599 24.8577C15.6822 25.0998 15.9431 25.3834 16.1889 25.4931L16.3894 25.5839H23.3481H30.3068L30.5223 25.478C30.7568 25.3645 30.9232 25.1981 31.0518 24.9485C31.169 24.7254 31.169 24.2526 31.0556 24.0295C30.9232 23.7761 30.7908 23.6475 30.545 23.5265L30.3143 23.4093L23.3519 23.4131C17.1117 23.4131 16.3705 23.4206 16.2192 23.4736Z"
          fill="white"
        />
      </svg>
      <span
        className={scrolled ? classes["cart-count2"] : classes["cart-count"]}
      >
        {cartAmount}
      </span>
    </div>
  );
};

export default CartIcon;
